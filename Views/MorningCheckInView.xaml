<UserControl x:Class="DailyCheckInJournal.Views.MorningCheckInView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="Morning Check-In" FontSize="24" FontWeight="Bold" Margin="0,0,0,10"/>

            <!-- Energy Level -->
            <GroupBox Header="Energy Level (1-10)" Margin="0,0,0,15">
                <StackPanel>
                    <Slider Value="{Binding EnergyLevel}" Minimum="1" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Margin="10"/>
                    <TextBlock Text="{Binding EnergyLevel, StringFormat='Energy: {}{0}'}" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
            </GroupBox>

            <!-- Must Do Today -->
            <GroupBox Header="What's ONE must-do today?" Margin="0,0,0,15">
                <TextBox Text="{Binding MustDoToday}" Margin="10" MinHeight="30" TextWrapping="Wrap"/>
            </GroupBox>

            <!-- Capacity Feeling -->
            <GroupBox Header="How are you feeling about your capacity? (1-10)" Margin="0,0,0,15">
                <StackPanel>
                    <Slider Value="{Binding CapacityFeeling}" Minimum="1" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Margin="10"/>
                    <TextBlock Text="{Binding CapacityFeeling, StringFormat='Capacity: {}{0}'}" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
            </GroupBox>

            <!-- Sleep Quality -->
            <GroupBox Header="Sleep Quality (from last night)" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Quality (1-10):" Width="150"/>
                        <Slider Value="{Binding SleepQuality.Quality}" Minimum="1" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding SleepQuality.Quality}" Margin="10,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Hours Slept:" Width="150"/>
                        <Slider Value="{Binding SleepQuality.HoursSlept}" Minimum="0" Maximum="16" TickFrequency="0.5" Width="200"/>
                        <TextBlock Text="{Binding SleepQuality.HoursSlept, StringFormat='{}{0:F1}'}" Margin="10,0"/>
                    </StackPanel>
                    <CheckBox Content="Restless Sleep" IsChecked="{Binding SleepQuality.Restless}" Margin="0,0,0,10"/>
                    <TextBox Text="{Binding SleepQuality.Notes}" MinHeight="50" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>

            <!-- Medications -->
            <GroupBox Header="Medications" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <Button Content="Add Medication" Command="{Binding AddMedicationCommand}" HorizontalAlignment="Left" Margin="0,0,0,10"/>
                    <ItemsControl ItemsSource="{Binding Medications}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,5" Padding="10">
                                    <StackPanel>
                                        <TextBox Text="{Binding Name}" Margin="0,0,0,5"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Time:" Width="80"/>
                                            <DatePicker SelectedDate="{Binding TimeTaken, Converter={StaticResource DateTimeToDateConverter}}" Width="150"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Dosage:" Width="80"/>
                                            <TextBox Text="{Binding Dosage}" Width="100"/>
                                        </StackPanel>
                                        <TextBox Text="{Binding Notes}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>

            <!-- Sensory State -->
            <GroupBox Header="Sensory State" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Overload Level (0-10):" Width="200"/>
                        <Slider Value="{Binding SensoryState.OverloadLevel}" Minimum="0" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding SensoryState.OverloadLevel}" Margin="10,0"/>
                    </StackPanel>
                    <TextBlock Text="Triggers (comma-separated):" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding SensoryState.Triggers, Converter={StaticResource ListToStringConverter}}" Margin="0,0,0,10"/>
                    <TextBox Text="{Binding SensoryState.Notes}" MinHeight="50" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>

            <!-- Executive Function -->
            <GroupBox Header="Executive Function" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Task Initiation Difficulty (0-10):" Width="250"/>
                        <Slider Value="{Binding ExecutiveFunction.TaskInitiationDifficulty}" Minimum="0" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding ExecutiveFunction.TaskInitiationDifficulty}" Margin="10,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Transition Difficulty (0-10):" Width="250"/>
                        <Slider Value="{Binding ExecutiveFunction.TransitionDifficulty}" Minimum="0" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding ExecutiveFunction.TransitionDifficulty}" Margin="10,0"/>
                    </StackPanel>
                    <CheckBox Content="Time Blindness" IsChecked="{Binding ExecutiveFunction.TimeBlindness}" Margin="0,0,0,5"/>
                    <CheckBox Content="Hyperfocus Period" IsChecked="{Binding ExecutiveFunction.HyperfocusPeriod}" Margin="0,0,0,10"/>
                    <TextBox Text="{Binding ExecutiveFunction.Notes}" MinHeight="50" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>

            <!-- Emotional State -->
            <GroupBox Header="Emotional State" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Overall Mood (1-10):" Width="200"/>
                        <Slider Value="{Binding EmotionalState.OverallMood}" Minimum="1" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding EmotionalState.OverallMood}" Margin="10,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Overwhelm Level (0-10):" Width="200"/>
                        <Slider Value="{Binding EmotionalState.OverwhelmLevel}" Minimum="0" Maximum="10" TickFrequency="1" IsSnapToTickEnabled="True" Width="200"/>
                        <TextBlock Text="{Binding EmotionalState.OverwhelmLevel}" Margin="10,0"/>
                    </StackPanel>
                    <CheckBox Content="Meltdown" IsChecked="{Binding EmotionalState.Meltdown}" Margin="0,0,0,5"/>
                    <CheckBox Content="Shutdown" IsChecked="{Binding EmotionalState.Shutdown}" Margin="0,0,0,10"/>
                    <TextBox Text="{Binding EmotionalState.Notes}" MinHeight="50" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>

            <!-- Habits -->
            <GroupBox Header="Habits" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <ItemsControl ItemsSource="{Binding HabitEntries}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox Content="{Binding HabitName}" IsChecked="{Binding Completed}" Margin="0,2"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>

            <!-- Gratitude -->
            <GroupBox Header="Gratitude / Positives" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <Button Content="Add Gratitude Item" Command="{Binding AddGratitudeCommand}" HorizontalAlignment="Left" Margin="0,0,0,10"/>
                    <ItemsControl ItemsSource="{Binding GratitudeItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding .}" Margin="0,2"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>

            <!-- Triggers -->
            <GroupBox Header="Triggers" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <Button Content="Add Trigger" Command="{Binding AddTriggerCommand}" HorizontalAlignment="Left" Margin="0,0,0,10"/>
                    <ItemsControl ItemsSource="{Binding Triggers}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,5" Padding="10">
                                    <StackPanel>
                                        <TextBox Text="{Binding Description}" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding Category}" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding Notes}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>

            <!-- Coping Strategies -->
            <GroupBox Header="Coping Strategies" Margin="0,0,0,15">
                <StackPanel Margin="10">
                    <Button Content="Add Coping Strategy" Command="{Binding AddCopingStrategyCommand}" HorizontalAlignment="Left" Margin="0,0,0,10"/>
                    <ItemsControl ItemsSource="{Binding CopingStrategies}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,5" Padding="10">
                                    <StackPanel>
                                        <TextBox Text="{Binding Strategy}" Margin="0,0,0,5"/>
                                        <CheckBox Content="Effective" IsChecked="{Binding Effective}" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding Notes}" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </GroupBox>

            <!-- Save Button -->
            <Button Content="Save Morning Check-In" Command="{Binding SaveCommand}" 
                    HorizontalAlignment="Center" Padding="20,10" FontSize="16" Margin="0,20,0,0"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>

